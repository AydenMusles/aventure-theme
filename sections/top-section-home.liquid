{% if section.settings.divider %}<div class="section--divider">{% endif %}

<div
  data-section-id="{{ section.id }}"
  data-section-type="top-section-home-section"
  class="text-{{ section.settings.align_text }}">
  <div class="page-width">
    <div class="grid ml-0">
      <p class="h1 text-center mx-30">
        {{ section.settings.title | escape }}
      </p>

      <div class="grid__item medium-up--one-half large-up--push-one-sixteenth pl-0">

        {% if section.settings.text != blank %}
          <div class="rte my-30 fs-16">
            {{ section.settings.text }}
          </div>
        {% endif %}

        {% for block in section.blocks %}
          {% case block.type %}
          {% when 'button_customer' %}
            {% if customer %}
              <div class="rte my-30" {{ block.shopify_attributes }}>
                <div class="w-100 my-10 text-center">
                  <a href="{{ block.settings.link }}"  class="btn btn--success fs-12">{{ block.settings.button_text }} </a>
                </div>
              </div>
            {% endif %}
          {% when 'button_visitor' %}
            {% unless customer %}
              <div class="rte my-30" {{ block.shopify_attributes }}>
                <div class="w-100 my-10 text-center">
                  <a href="{{ block.settings.link }}"  class="btn btn--success fs-12">{{ block.settings.button_text }} </a>
                </div>
              </div>
            {% endunless %}
          {% endcase %}
        {% endfor %}

      </div>

      <div class="grid__item medium--one-half large-up--five-sixteenths large-up--push-one-eighth my-30">
        {%- assign img_url = section.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
        <img class="lazyload"
          data-src="{{ img_url }}"
          data-widths="[360, 540, 720, 900, 1080, 1600]"
          data-aspectratio="{{ section.settings.image.aspect_ratio }}"
          data-sizes="auto"
          role="presentation"
          alt="{{ section.settings.image.alt }}">
      </div>
    </div>
  </div>
</div>

{% if section.settings.divider %}</div>{% endif %}

{% schema %}
  {
    "name": "Top section home",
    "class": "top_section_home",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Titre",
        "default": "AVENTURE BIO : GROSSISTE-INCUBATEUR EN LIGNE"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text",
        "default": "<p>A sentence or two introducing your brand, what you sell, and what makes your brand compelling to customers.</p>"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "select",
        "id": "align_text",
        "label": "Text alignment",
        "default": "center",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Centered"
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "divider",
        "label": "Show section divider",
        "default": true
      }
    ],
    "blocks" : [
      {
        "type": "button_customer",
        "name": "Button for customers",
        "settings": [
          {
            "type": "url",
            "id": "link",
            "label": "Link"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button text",
            "default": "Go to new page"
          }
        ]
      },
      {
        "type": "button_visitor",
        "name": "Button for visitor",
        "settings": [
          {
            "type": "url",
            "id": "link",
            "label": "Link"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button text",
            "default": "Go to new page"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Top Section Home",
        "category": "Advanced layout"
      }
    ]
  }
{% endschema %}
